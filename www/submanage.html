<!DOCTYPE html>
<html lang="kor" dir="ltr">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="./static/css/common/base.css" type="text/css" />
    <link rel="stylesheet" href="./static/css/common/manage.css" type="text/css" />
    <link rel="stylesheet" href="./static/css/common/header.css" type="text/css" />
    <link rel="stylesheet" href="./static/css/common/modal.css" type="text/css" />

    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/DIS.Web.Common.js"></script>
    <script type="text/javascript" src="js/DIS.Web.Init.js"></script>
    <script type="text/javascript" src="js/DIS.Web.SubAccount.js"></script>
    <script src="./static/js/sweetalert/sweetalert.js"></script>
    <script src="./static/js/common/common.js"></script>
    <script src="./static/js/common/header.js"></script>
</head>

<body>
    <div class="header">
        <div class="header_content">
            <a href="/main">
                <div class="logo"></div>
            </a>
            <div class="flow">
            </div>
            <div class="login_user">
            </div>
            <div class="menuBtn">
                <div id="myDropdown" class="dropdown-content">
                    <a href="/main">홈</a>
                    <a href="/log">기록 열람</a>
                    <a href="/key">KEY 관리</a>
                    <a class="infoMove">내 정보</a>
                    <a class="admin_only" href="/submanage">서브 계정 관리</a>
                    <div id="logout">로그아웃</div>
                </div>
            </div>
        </div>
    </div>
    <div class="sub_content">
        <div class="sub_add">
            <p>새 계정 추가하기</p>
        </div>
        <div class="sub_table">
            <div class="subList">
                <div class="listHeader">
                    <div class="headArea">
                        <div class="number_head">
                            <h3>No</h3>
                        </div>
                        <div class="id_head">
                            <h3>ID</h3>
                        </div>
                        <div class="name_head">
                            <h3>이름</h3>
                        </div>
                        <div class="last_head">
                            <h3>최종 접속일</h3>
                        </div>
                        <div class="create_head">
                            <h3>계정 생성일</h3>
                        </div>
                        <div class="pass_head">
                            <h3>비밀번호 재설정</h3>
                        </div>
                        <div class="auth_head">
                            <h3>권한 재설정</h3>
                        </div>
                        <div class="del_head">
                            <h3>삭제하기</h3>
                        </div>
                    </div>
                </div>
                <div class="listContent">
                    <!-- <div class="tableContent">
                        <div class="number_content"><p>5</p></div>
                        <div class="id_content"><p>asdf</p></div>
                        <div class="name_content"><p>홍길동</p></div>
                        <div class="last_content"><p>2022.08.22</p></div>
                        <div class="create_content"><p>2022.08.15</p></div>
                        <div class="pass_content">
                            <div class="pass_modi"><p>재설정</p></div>
                        </div>
                        <div class="del_content">
                            <div class="delBtn"><p>삭제하기</p></div>
                        </div>
                    </div>
                    <div class="tableContent">
                        <div class="number_content"><p>4</p></div>
                        <div class="id_content"><p>qwerfsda</p></div>
                        <div class="name_content"><p>박길동</p></div>
                        <div class="last_content"><p>2022.08.21</p></div>
                        <div class="create_content"><p>2022.08.14</p></div>
                        <div class="pass_content">
                            <div class="pass_modi"><p>재설정</p></div>
                        </div>
                        <div class="del_content">
                            <div class="delBtn"><p>삭제하기</p></div>
                        </div>
                    </div>
                    <div class="tableContent">
                        <div class="number_content"><p>3</p></div>
                        <div class="id_content"><p>hsdhd</p></div>
                        <div class="name_content"><p>최길동</p></div>
                        <div class="last_content"><p>2022.08.20</p></div>
                        <div class="create_content"><p>2022.08.13</p></div>
                        <div class="pass_content">
                            <div class="pass_modi"><p>재설정</p></div>
                        </div>
                        <div class="del_content">
                            <div class="delBtn"><p>삭제하기</p></div>
                        </div>
                    </div>
                    <div class="tableContent">
                        <div class="number_content"><p>2</p></div>
                        <div class="id_content"><p>wrqwtgw</p></div>
                        <div class="name_content"><p>이길동</p></div>
                        <div class="last_content"><p>2022.08.19</p></div>
                        <div class="create_content"><p>2022.08.12</p></div>
                        <div class="pass_content">
                            <div class="pass_modi"><p>재설정</p></div>
                        </div>
                        <div class="del_content">
                            <div class="delBtn"><p>삭제하기</p></div>
                        </div>
                    </div>
                    <div class="tableContent">
                        <div class="number_content"><p>1</p></div>
                        <div class="id_content"><p>cvbnvn</p></div>
                        <div class="name_content"><p>김길동</p></div>
                        <div class="last_content"><p>2022.08.18</p></div>
                        <div class="create_content"><p>2022.08.11</p></div>
                        <div class="pass_content">
                            <div class="pass_modi"><p>재설정</p></div>
                        </div>
                        <div class="del_content">
                            <div class="delBtn"><p>삭제하기</p></div>
                        </div>
                    </div> -->
                </div>
            </div>
        </div>
    </div>
</body>

<div id="passModi" class="modal">
    <div id="wrap">
        <div class="layerPopupBox active">
            <div class="inner">
                <div class="passContent">
                    <div class="passHeader">
                        <h1>서브 계정 비밀번호 재설정</h1>
                    </div>
                    <div class="passBody">
                        <div class="bodyHeader">
                            <p>비밀번호 : </p>
                            <input type="password" class="modi_password">
                        </div>
                        <div class="passFooter">
                            <div class="passConfig">
                                <p>확인</p>
                            </div>
                            <div class="cancel">
                                <p>취소</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="authModi" class="modal">
    <div id="wrap">
        <div class="layerPopupBox active">
            <div class="auth_inner">
                <div class="authContent">
                    <div class="authHeader">
                        <h1>서브 계정 권한 설정</h1>
                        <input class="subid" value="" hidden>
                    </div>
                    <div class="authBody">
                        <div class="authArea">
                            <div class="bucketAuth">
                                <h1>버킷 권한 설정</h1>
                                <input class="bdownloadAuth" type="checkbox"><label>다운로드</label>&nbsp;
                                <input class="buploadAuth" type="checkbox"><label>업로드</label>&nbsp;
                                <input class="bdeleteAuth" type="checkbox"><label>삭제</label>
                            </div>
                            <div class="dbAuth">
                                <h1>DB 권한 설정</h1>
                                <input class="dcreateAuth" type="checkbox"><label>생성</label>&nbsp;
                                <input class="dreadAuth" type="checkbox"><label>읽기</label>&nbsp;
                                <input class="dupdateAuth" type="checkbox"><label>수정</label>&nbsp;
                                <input class="ddeleteAuth" type="checkbox"><label>삭제</label>
                            </div>
                            <div class="enc_dec_Auth">
                                <h1>암복호화 권한 설정</h1>
                                <input class="encAuth" type="checkbox"><label>비식별화</label>&nbsp;
                                <input class="decAuth" type="checkbox"><label>복호화</label>
                            </div>
                        </div>
                        <div class="authFooter">
                            <div class="authConfig">
                                <p>확인</p>
                            </div>
                            <div class="cancel">
                                <p>취소</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="saveConfir" class="modal">
    <div id="wrap">
        <div class="layerPopupBox active">
            <div class="info_inner">
                <div class="saveContent">
                    <div class="saveHeader">
                        <h1>비밀번호 입력</h1>
                    </div>
                    <div class="saveBody">
                        <div class="bodyHeader">
                            <p>현재 비밀번호 : </p>
                            <input type="password" class="cur_password">
                        </div>
                        <div class="saveFooter">
                            <div class="infoConfir">
                                <p>확인</p>
                            </div>
                            <div class="cancel">
                                <p>취소</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).on("click", ".pass_modi", function () {
        var Idx = $(this).attr('value')

        $(document).on("click", ".passConfig", function () {
            var newPassword = $('.modi_password').val();
            Swal.fire({
                title: '입력한 비밀번호로 변경하시겠습니까?',
                showCancelButton: true,
                confirmButtonText: '네',
                cancelButtonText: '취소'
            }).then((result) => {
                if (result.isConfirmed) {
                    var result = subaccount.resetPassword(Idx, newPassword)
                    if (result) Swal.fire('비밀번호 재설정이 완료되었습니다.', '', 'success').then(() => {
                        location.href = '/submanage';
                    })
                    else Swal.fire(
                        '처리가 완료되지 않았습니다.',
                        '다시 시도해 주세요.',
                        'error'
                    )
                }
            })
        })
    });

    $(document).on("click", ".delBtn", function () {
        var Idx = $(this).attr('value')

        Swal.fire({
            title: '해당 서브계정을 삭제하시겠습니까?',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            confirmButtonText: '삭제',
            cancelButtonText: '취소'
        }).then((result) => {
            if (result.isConfirmed) {
                var result = subaccount.deleteSubAccount(Idx)
                if (result) Swal.fire('서브계정이 삭제되었습니다.', '', 'success').then(() => {
                    location.href = '/submanage';
                })
                else Swal.fire(
                    '처리가 완료되지 않았습니다.',
                    '다시 시도해 주세요.',
                    'error'
                )
            }
        })
    });
</script>

</html>